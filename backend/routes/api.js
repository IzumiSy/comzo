var express = require('express');
var router = express.Router();
var mongoose = require('mongoose');
var Event = require("../models/event"); //モデルの宣言
var moment = require("moment");
var app = express();
var ObjectID = require('mongodb').ObjectID;

// GET index
/*
  サンプルデータ投入
  db.Event.save({'date': '16/5/23', 'longitude': 139.735285, 'venue': 'クラブeX', 'latitude': 35.6280212, 'num_of_people': 365})
*/
router.get('/events',function(req, res){
  console.log("一覧表示命令来た");
  Event.find({}, function(err, events) {
    res.json(events);
    console.log(events)
  });
});

router.get('/seed',function(req, res){
  console.log("データ生成命令がきた");
  var event_list = [{'num_of_people': 11098, 'start': 8, 'date': '2016-5-21', 'venue': '両国国技館', 'longitude': 139.7936036, 'latitude': 35.6972034}, {'num_of_people': 218, 'start': 13, 'date': '2016-5-21', 'venue': 'テアトル新宿', 'longitude': 139.7052181, 'latitude': 35.6922864}, {'num_of_people': 240, 'start': 15, 'date': '2016-5-21', 'venue': 'TFTホール', 'longitude': 139.7904725, 'latitude': 35.6309772}, {'num_of_people': 3000, 'start': 16, 'date': '2016-5-21', 'venue': 'TOKYO DOME CITY HALL', 'longitude': 139.753828, 'latitude': 35.7049895}, {'num_of_people': 14000, 'start': 17, 'date': '2016-5-21', 'venue': '日本武道館', 'longitude': 139.7497593, 'latitude': 35.6934055}, {'num_of_people': 1000, 'start': 17, 'date': '2016-5-21', 'venue': 'LIQUIDROOM (リキッドルーム)', 'longitude': 139.7105837, 'latitude': 35.6490402}, {'num_of_people': 609, 'start': 17, 'date': '2016-5-21', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 1255, 'start': 17, 'date': '2016-5-21', 'venue': '四季劇場[春]', 'longitude': 139.7620402, 'latitude': 35.6566796}, {'num_of_people': 2222, 'start': 17, 'date': '2016-5-21', 'venue': '中野サンプラザ', 'longitude': 139.6646854, 'latitude': 35.707618}, {'num_of_people': 3119, 'start': 17, 'date': '2016-5-21', 'venue': '日比谷野外大音楽堂', 'longitude': 139.7543263, 'latitude': 35.6728275}, {'num_of_people': 501, 'start': 17, 'date': '2016-5-21', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 450, 'start': 17, 'date': '2016-5-21', 'venue': 'Shibuya WWW', 'longitude': 139.6987557, 'latitude': 35.6615117}, {'num_of_people': 55000, 'start': 18, 'date': '2016-5-21', 'venue': '東京ドーム', 'longitude': 139.7531449, 'latitude': 35.7028239}, {'num_of_people': 13243, 'start': 18, 'date': '2016-5-21', 'venue': '国立代々木競技場 第一体育館', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 34572, 'start': 18, 'date': '2016-5-21', 'venue': '神宮球場', 'longitude': 139.716599, 'latitude': 35.67374849999999}, {'num_of_people': 450, 'start': 18, 'date': '2016-5-21', 'venue': 'AREA', 'longitude': 139.7016709, 'latitude': 35.7136295}, {'num_of_people': 1000, 'start': 18, 'date': '2016-5-21', 'venue': 'UNIT', 'longitude': 139.7071813, 'latitude': 35.6483457}, {'num_of_people': 3103, 'start': 18, 'date': '2016-5-21', 'venue': '豊洲PIT', 'longitude': 139.7889943, 'latitude': 35.6495585}, {'num_of_people': 11098, 'start': 8, 'date': '2016-5-22', 'venue': '両国国技館', 'longitude': 139.7936036, 'latitude': 35.6972034}, {'num_of_people': 1999, 'start': 14, 'date': '2016-5-22', 'venue': '東京芸術劇場', 'longitude': 139.7080751, 'latitude': 35.729842}, {'num_of_people': 901, 'start': 14, 'date': '2016-5-22', 'venue': '六本木ブルーシアター', 'longitude': 139.729426, 'latitude': 35.6641222}, {'num_of_people': 300, 'start': 14, 'date': '2016-5-22', 'venue': '俳優座劇場', 'longitude': 139.7327091, 'latitude': 35.6638057}, {'num_of_people': 500, 'start': 14, 'date': '2016-5-22', 'venue': '全電通労働会館', 'longitude': 139.7658304, 'latitude': 35.69685}, {'num_of_people': 700, 'start': 15, 'date': '2016-5-22', 'venue': '品川インターシティホール', 'longitude': 139.7418095, 'latitude': 35.6265605}, {'num_of_people': 3103, 'start': 15, 'date': '2016-5-22', 'venue': '豊洲PIT', 'longitude': 139.7889943, 'latitude': 35.6495585}, {'num_of_people': 2709, 'start': 15, 'date': '2016-5-22', 'venue': 'Zepp Tokyo(東京)', 'longitude': 139.7818926, 'latitude': 35.624722}, {'num_of_people': 3000, 'start': 16, 'date': '2016-5-22', 'venue': 'TOKYO DOME CITY HALL', 'longitude': 139.753828, 'latitude': 35.7049895}, {'num_of_people': 410, 'start': 16, 'date': '2016-5-22', 'venue': '科学技術館 サイエンスホール', 'longitude': 139.753023, 'latitude': 35.6911892}, {'num_of_people': 49970, 'start': 16, 'date': '2016-5-22', 'venue': '味の素スタジアム', 'longitude': 139.5254355, 'latitude': 35.6634009}, {'num_of_people': 14000, 'start': 17, 'date': '2016-5-22', 'venue': '日本武道館', 'longitude': 139.7497593, 'latitude': 35.6934055}, {'num_of_people': 55000, 'start': 17, 'date': '2016-5-22', 'venue': '東京ドーム', 'longitude': 139.7531449, 'latitude': 35.7028239}, {'num_of_people': 13243, 'start': 17, 'date': '2016-5-22', 'venue': '国立代々木競技場 第一体育館', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 609, 'start': 17, 'date': '2016-5-22', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 2550, 'start': 11, 'date': '2016-5-23', 'venue': 'グランドプリンスホテル新高輪 大宴会場 飛天', 'longitude': 139.7352793, 'latitude': 35.6309486}, {'num_of_people': 1897, 'start': 13, 'date': '2016-5-23', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 584, 'start': 15, 'date': '2016-5-23', 'venue': '全労済ホール/スペース・ゼロ', 'longitude': 139.6972798, 'latitude': 35.6869818}, {'num_of_people': 1814, 'start': 17, 'date': '2016-5-23', 'venue': '新国立劇場', 'longitude': 139.6856683, 'latitude': 35.6825909}, {'num_of_people': 2550, 'start': 17, 'date': '2016-5-23', 'venue': 'グランドプリンスホテル新高輪 大宴会場 飛天', 'longitude': 139.7352793, 'latitude': 35.6309486}, {'num_of_people': 55000, 'start': 18, 'date': '2016-5-23', 'venue': '東京ドーム', 'longitude': 139.7531449, 'latitude': 35.7028239}, {'num_of_people': 1842, 'start': 18, 'date': '2016-5-23', 'venue': 'なかのZERO', 'longitude': 139.6662751, 'latitude': 35.7078586}, {'num_of_people': 365, 'start': 18, 'date': '2016-5-23', 'venue': 'クラブeX', 'longitude': 139.735285, 'latitude': 35.6280212}, {'num_of_people': 3800, 'start': 18, 'date': '2016-5-23', 'venue': 'NHKホール', 'longitude': 139.6968789, 'latitude': 35.6665599}, {'num_of_people': 2010, 'start': 19, 'date': '2016-5-23', 'venue': 'サントリーホール', 'longitude': 139.7413971, 'latitude': 35.66663339999999}, {'num_of_people': 600, 'start': 19, 'date': '2016-5-23', 'venue': 'TSUTAYA O-WEST', 'longitude': 139.6953404, 'latitude': 35.6585025}, {'num_of_people': 300, 'start': 19, 'date': '2016-5-23', 'venue': '俳優座劇場', 'longitude': 139.7327091, 'latitude': 35.6638057}, {'num_of_people': 1632, 'start': 19, 'date': '2016-5-23', 'venue': '東京オペラシティ', 'longitude': 139.6868265, 'latitude': 35.683002}, {'num_of_people': 2956, 'start': 19, 'date': '2016-5-23', 'venue': '東京文化会館', 'longitude': 139.7752986, 'latitude': 35.714415}, {'num_of_people': 1746, 'start': 19, 'date': '2016-5-23', 'venue': 'EXシアター六本木(EX THEATER ROPPONGI)', 'longitude': 139.7271569, 'latitude': 35.6611948}, {'num_of_people': 1897, 'start': 13, 'date': '2016-5-24', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 1324, 'start': 13, 'date': '2016-5-24', 'venue': '赤坂ACTシアター', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 703, 'start': 14, 'date': '2016-5-24', 'venue': '東京グローブ座', 'longitude': 139.7003548, 'latitude': 35.7047637}, {'num_of_people': 386, 'start': 14, 'date': '2016-5-24', 'venue': '本多劇場', 'longitude': 139.6683205, 'latitude': 35.6615874}, {'num_of_people': 600, 'start': 14, 'date': '2016-5-24', 'venue': '世田谷パブリックシアター', 'longitude': 139.669046, 'latitude': 35.6436557}, {'num_of_people': 501, 'start': 14, 'date': '2016-5-24', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 1897, 'start': 18, 'date': '2016-5-24', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 1428, 'start': 18, 'date': '2016-5-24', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 34572, 'start': 18, 'date': '2016-5-24', 'venue': '神宮球場', 'longitude': 139.716599, 'latitude': 35.67374849999999}, {'num_of_people': 609, 'start': 18, 'date': '2016-5-24', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 1216, 'start': 18, 'date': '2016-5-24', 'venue': '電通四季劇場[海]', 'longitude': 139.7623483, 'latitude': 35.6650287}, {'num_of_people': 1324, 'start': 13, 'date': '2016-5-25', 'venue': '赤坂ACTシアター', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 609, 'start': 14, 'date': '2016-5-25', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 458, 'start': 14, 'date': '2016-5-25', 'venue': 'PARCO劇場(パルコ劇場)', 'longitude': 139.69904, 'latitude': 35.6605134}, {'num_of_people': 1867, 'start': 16, 'date': '2016-5-25', 'venue': '歌舞伎座', 'longitude': 139.7680533, 'latitude': 35.6697366}, {'num_of_people': 34572, 'start': 18, 'date': '2016-5-25', 'venue': '神宮球場', 'longitude': 139.716599, 'latitude': 35.67374849999999}, {'num_of_people': 609, 'start': 18, 'date': '2016-5-25', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 1999, 'start': 18, 'date': '2016-5-25', 'venue': '東京芸術劇場', 'longitude': 139.7080751, 'latitude': 35.729842}, {'num_of_people': 1216, 'start': 18, 'date': '2016-5-25', 'venue': '電通四季劇場[海]', 'longitude': 139.7623483, 'latitude': 35.6650287}, {'num_of_people': 13243, 'start': 18, 'date': '2016-5-25', 'venue': '国立代々木競技場 第一体育館', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 501, 'start': 18, 'date': '2016-5-25', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 2222, 'start': 18, 'date': '2016-5-25', 'venue': '中野サンプラザ', 'longitude': 139.6646854, 'latitude': 35.707618}, {'num_of_people': 250, 'start': 18, 'date': '2016-5-25', 'venue': '池袋EDGE', 'longitude': 139.7127357, 'latitude': 35.7291034}, {'num_of_people': 335, 'start': 18, 'date': '2016-5-25', 'venue': 'シネマート新宿', 'longitude': 139.7057766, 'latitude': 35.6918655}, {'num_of_people': 300, 'start': 18, 'date': '2016-5-25', 'venue': '国立演芸場', 'longitude': 139.7432769, 'latitude': 35.6815595}, {'num_of_people': 2010, 'start': 19, 'date': '2016-5-25', 'venue': 'サントリーホール', 'longitude': 139.7413971, 'latitude': 35.66663339999999}, {'num_of_people': 1746, 'start': 19, 'date': '2016-5-25', 'venue': 'EXシアター六本木(EX THEATER ROPPONGI)', 'longitude': 139.7271569, 'latitude': 35.6611948}, {'num_of_people': 1802, 'start': 19, 'date': '2016-5-25', 'venue': '新宿文化センター', 'longitude': 139.7094319, 'latitude': 35.6954929}, {'num_of_people': 1000, 'start': 19, 'date': '2016-5-25', 'venue': 'UNIT', 'longitude': 139.7071813, 'latitude': 35.6483457}, {'num_of_people': 800, 'start': 19, 'date': '2016-5-25', 'venue': '渋谷クラブクアトロ(CLUB QUATTRO)', 'longitude': 139.6975651, 'latitude': 35.6609856}, {'num_of_people': 120, 'start': 19, 'date': '2016-5-25', 'venue': 'ムジカーザ', 'longitude': 139.6817551, 'latitude': 35.67122}, {'num_of_people': 450, 'start': 19, 'date': '2016-5-25', 'venue': 'Shibuya WWW', 'longitude': 139.6987557, 'latitude': 35.6615117}, {'num_of_people': 250, 'start': 20, 'date': '2016-5-25', 'venue': 'SHELTER', 'longitude': 139.6694646, 'latitude': 35.6614799}, {'num_of_people': 1428, 'start': 11, 'date': '2016-5-26', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 1216, 'start': 13, 'date': '2016-5-26', 'venue': '電通四季劇場[海]', 'longitude': 139.7623483, 'latitude': 35.6650287}, {'num_of_people': 1814, 'start': 14, 'date': '2016-5-26', 'venue': '新国立劇場', 'longitude': 139.6856683, 'latitude': 35.6825909}, {'num_of_people': 609, 'start': 14, 'date': '2016-5-26', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 1897, 'start': 18, 'date': '2016-5-26', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 1428, 'start': 18, 'date': '2016-5-26', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 34572, 'start': 18, 'date': '2016-5-26', 'venue': '神宮球場', 'longitude': 139.716599, 'latitude': 35.67374849999999}, {'num_of_people': 609, 'start': 18, 'date': '2016-5-26', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 1999, 'start': 18, 'date': '2016-5-26', 'venue': '東京芸術劇場', 'longitude': 139.7080751, 'latitude': 35.729842}, {'num_of_people': 1200, 'start': 18, 'date': '2016-5-26', 'venue': '積水ハウスミュージカルシアター 四季劇場[夏]', 'longitude': 139.7333554, 'latitude': 35.6082652}, {'num_of_people': 501, 'start': 18, 'date': '2016-5-26', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 1324, 'start': 18, 'date': '2016-5-26', 'venue': '赤坂ACTシアター', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 220, 'start': 18, 'date': '2016-5-26', 'venue': '古賀政男音楽博物館 けやきホール', 'longitude': 139.6800387, 'latitude': 35.6678203}, {'num_of_people': 300, 'start': 19, 'date': '2016-5-26', 'venue': 'LIVE HOUSE FEVER', 'longitude': 139.6599964, 'latitude': 35.6627795}, {'num_of_people': 600, 'start': 19, 'date': '2016-5-26', 'venue': '世田谷パブリックシアター', 'longitude': 139.669046, 'latitude': 35.6436557}, {'num_of_people': 300, 'start': 19, 'date': '2016-5-26', 'venue': '俳優座劇場', 'longitude': 139.7327091, 'latitude': 35.6638057}, {'num_of_people': 458, 'start': 19, 'date': '2016-5-26', 'venue': 'PARCO劇場(パルコ劇場)', 'longitude': 139.69904, 'latitude': 35.6605134}, {'num_of_people': 383, 'start': 19, 'date': '2016-5-26', 'venue': 'ユナイテッド・シネマとしまえん', 'longitude': 139.6486577, 'latitude': 35.7423364}, {'num_of_people': 1428, 'start': 11, 'date': '2016-5-27', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 1368, 'start': 11, 'date': '2016-5-27', 'venue': '明治座', 'longitude': 139.7873211, 'latitude': 35.6877545}, {'num_of_people': 1897, 'start': 13, 'date': '2016-5-27', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 458, 'start': 13, 'date': '2016-5-27', 'venue': 'PARCO劇場(パルコ劇場)', 'longitude': 139.69904, 'latitude': 35.6605134}, {'num_of_people': 238, 'start': 14, 'date': '2016-5-27', 'venue': '座・高円寺1', 'longitude': 139.6540083, 'latitude': 35.7059012}, {'num_of_people': 1324, 'start': 14, 'date': '2016-5-27', 'venue': '赤坂ACTシアター', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 55000, 'start': 18, 'date': '2016-5-27', 'venue': '東京ドーム', 'longitude': 139.7531449, 'latitude': 35.7028239}, {'num_of_people': 609, 'start': 18, 'date': '2016-5-27', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 2222, 'start': 18, 'date': '2016-5-27', 'venue': '中野サンプラザ', 'longitude': 139.6646854, 'latitude': 35.707618}, {'num_of_people': 2956, 'start': 18, 'date': '2016-5-27', 'venue': '東京文化会館', 'longitude': 139.7752986, 'latitude': 35.714415}, {'num_of_people': 3800, 'start': 18, 'date': '2016-5-27', 'venue': 'NHKホール', 'longitude': 139.6968789, 'latitude': 35.6665599}, {'num_of_people': 501, 'start': 18, 'date': '2016-5-27', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 14000, 'start': 18, 'date': '2016-5-27', 'venue': '日本武道館', 'longitude': 139.7497593, 'latitude': 35.6934055}, {'num_of_people': 13243, 'start': 18, 'date': '2016-5-27', 'venue': '国立代々木競技場 第一体育館', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 2402, 'start': 18, 'date': '2016-5-27', 'venue': '新木場STUDIO COAST', 'longitude': 139.8253126, 'latitude': 35.6422295}, {'num_of_people': 150, 'start': 18, 'date': '2016-5-27', 'venue': 'shibuya eggman', 'longitude': 139.6995259, 'latitude': 35.6644158}, {'num_of_people': 824, 'start': 19, 'date': '2016-5-27', 'venue': 'AiiA Theater Tokyo', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 1147, 'start': 19, 'date': '2016-5-27', 'venue': '赤坂BLITZ', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 3000, 'start': 19, 'date': '2016-5-27', 'venue': 'TOKYO DOME CITY HALL', 'longitude': 139.753828, 'latitude': 35.7049895}, {'num_of_people': 2709, 'start': 19, 'date': '2016-5-27', 'venue': 'Zepp Tokyo(東京)', 'longitude': 139.7818926, 'latitude': 35.624722}, {'num_of_people': 700, 'start': 19, 'date': '2016-5-27', 'venue': 'duo MUSIC EXCHANGE', 'longitude': 139.6955447, 'latitude': 35.6589847}, {'num_of_people': 130, 'start': 19, 'date': '2016-5-27', 'venue': 'ウエストエンドスタジオ', 'longitude': 139.6685077, 'latitude': 35.7136292}, {'num_of_people': 300, 'start': 19, 'date': '2016-5-27', 'venue': '新宿ANTIKNOCK', 'longitude': 139.7036079, 'latitude': 35.6885352}, {'num_of_people': 1477, 'start': 19, 'date': '2016-5-27', 'venue': '大田区民ホール・アプリコ', 'longitude': 139.7178454, 'latitude': 35.5601542}, {'num_of_people': 250, 'start': 19, 'date': '2016-5-27', 'venue': 'Shibuya Milkyway', 'longitude': 139.6978981, 'latitude': 35.6624758}, {'num_of_people': 239, 'start': 19, 'date': '2016-5-27', 'venue': '吉祥寺シアター', 'longitude': 139.5835675, 'latitude': 35.7037669}, {'num_of_people': 300, 'start': 0, 'date': '2016-5-28', 'venue': '新宿ロフトPLUS ONE', 'longitude': 139.7015281, 'latitude': 35.6976677}, {'num_of_people': 1428, 'start': 11, 'date': '2016-5-28', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 24871, 'start': 11, 'date': '2016-5-28', 'venue': '秩父宮ラグビー場', 'longitude': 139.717949, 'latitude': 35.6717432}, {'num_of_people': 400, 'start': 12, 'date': '2016-5-28', 'venue': '原宿アストロホール', 'longitude': 139.7065745, 'latitude': 35.6694569}, {'num_of_people': 350, 'start': 12, 'date': '2016-5-28', 'venue': '初台TheDOORS', 'longitude': 139.6855544, 'latitude': 35.6813605}, {'num_of_people': 1200, 'start': 13, 'date': '2016-5-28', 'venue': '積水ハウスミュージカルシアター 四季劇場[夏]', 'longitude': 139.7333554, 'latitude': 35.6082652}, {'num_of_people': 824, 'start': 13, 'date': '2016-5-28', 'venue': 'AiiA Theater Tokyo', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 600, 'start': 13, 'date': '2016-5-28', 'venue': '世田谷パブリックシアター', 'longitude': 139.669046, 'latitude': 35.6436557}, {'num_of_people': 501, 'start': 13, 'date': '2016-5-28', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 250, 'start': 13, 'date': '2016-5-28', 'venue': '日本橋三井ホール', 'longitude': 139.775383, 'latitude': 35.6854294}, {'num_of_people': 458, 'start': 13, 'date': '2016-5-28', 'venue': 'PARCO劇場(パルコ劇場)', 'longitude': 139.69904, 'latitude': 35.6605134}, {'num_of_people': 1842, 'start': 13, 'date': '2016-5-28', 'venue': 'なかのZERO', 'longitude': 139.6662751, 'latitude': 35.7078586}, {'num_of_people': 702, 'start': 13, 'date': '2016-5-28', 'venue': '秋川キララホール', 'longitude': 139.2881831, 'latitude': 35.7310813}, {'num_of_people': 3000, 'start': 13, 'date': '2016-5-28', 'venue': '東京ビッグサイト', 'longitude': 139.7942868, 'latitude': 35.6298179}, {'num_of_people': 2956, 'start': 14, 'date': '2016-5-28', 'venue': '東京文化会館', 'longitude': 139.7752986, 'latitude': 35.714415}, {'num_of_people': 1801, 'start': 14, 'date': '2016-5-28', 'venue': 'すみだトリフォニーホール', 'longitude': 139.8101903, 'latitude': 35.69726740000001}, {'num_of_people': 1120, 'start': 14, 'date': '2016-5-28', 'venue': 'サンパール荒川', 'longitude': 139.7851078, 'latitude': 35.7352135}, {'num_of_people': 3000, 'start': 14, 'date': '2016-5-28', 'venue': 'TOKYO DOME CITY HALL', 'longitude': 139.753828, 'latitude': 35.7049895}, {'num_of_people': 1300, 'start': 14, 'date': '2016-5-28', 'venue': '山野美容専門学校 山野ホール', 'longitude': 139.6997279, 'latitude': 35.6841578}, {'num_of_people': 1428, 'start': 15, 'date': '2016-5-28', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 2709, 'start': 15, 'date': '2016-5-28', 'venue': 'Zepp Tokyo(東京)', 'longitude': 139.7818926, 'latitude': 35.624722}, {'num_of_people': 1062, 'start': 15, 'date': '2016-5-28', 'venue': '福生市民会館(もくせいホール)', 'longitude': 139.3378372, 'latitude': 35.7340069}, {'num_of_people': 410, 'start': 15, 'date': '2016-5-28', 'venue': '科学技術館 サイエンスホール', 'longitude': 139.753023, 'latitude': 35.6911892}, {'num_of_people': 335, 'start': 15, 'date': '2016-5-28', 'venue': 'シネマート新宿', 'longitude': 139.7057766, 'latitude': 35.6918655}, {'num_of_people': 3000, 'start': 15, 'date': '2016-5-28', 'venue': '東京ビッグサイト', 'longitude': 139.7942868, 'latitude': 35.6298179}, {'num_of_people': 413, 'start': 16, 'date': '2016-5-28', 'venue': 'ユナイテッド・シネマ豊洲', 'longitude': 139.7927659, 'latitude': 35.6551414}, {'num_of_people': 1897, 'start': 17, 'date': '2016-5-28', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 1746, 'start': 17, 'date': '2016-5-28', 'venue': 'EXシアター六本木(EX THEATER ROPPONGI)', 'longitude': 139.7271569, 'latitude': 35.6611948}, {'num_of_people': 703, 'start': 17, 'date': '2016-5-28', 'venue': '東京グローブ座', 'longitude': 139.7003548, 'latitude': 35.7047637}, {'num_of_people': 173, 'start': 17, 'date': '2016-5-28', 'venue': '赤坂RED/THEATER', 'longitude': 139.7370814, 'latitude': 35.6755898}, {'num_of_people': 600, 'start': 17, 'date': '2016-5-28', 'venue': '世田谷パブリックシアター', 'longitude': 139.669046, 'latitude': 35.6436557}, {'num_of_people': 800, 'start': 17, 'date': '2016-5-28', 'venue': '新宿BLAZE', 'longitude': 139.7010693, 'latitude': 35.6952791}, {'num_of_people': 609, 'start': 17, 'date': '2016-5-28', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 1318, 'start': 17, 'date': '2016-5-28', 'venue': 'かつしかシンフォニーヒルズ', 'longitude': 139.8522125, 'latitude': 35.7424583}, {'num_of_people': 816, 'start': 17, 'date': '2016-5-28', 'venue': 'サンシャイン劇場', 'longitude': 139.7232404, 'latitude': 35.7262319}, {'num_of_people': 3000, 'start': 17, 'date': '2016-5-28', 'venue': '東京ビッグサイト', 'longitude': 139.7942868, 'latitude': 35.6298179}, {'num_of_people': 1147, 'start': 17, 'date': '2016-5-28', 'venue': '赤坂BLITZ', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 2222, 'start': 17, 'date': '2016-5-28', 'venue': '中野サンプラザ', 'longitude': 139.6646854, 'latitude': 35.707618}, {'num_of_people': 1255, 'start': 17, 'date': '2016-5-28', 'venue': '四季劇場[春]', 'longitude': 139.7620402, 'latitude': 35.6566796}, {'num_of_people': 1200, 'start': 17, 'date': '2016-5-28', 'venue': '積水ハウスミュージカルシアター 四季劇場[夏]', 'longitude': 139.7333554, 'latitude': 35.6082652}, {'num_of_people': 501, 'start': 17, 'date': '2016-5-28', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 1814, 'start': 18, 'date': '2016-5-28', 'venue': '新国立劇場', 'longitude': 139.6856683, 'latitude': 35.6825909}, {'num_of_people': 824, 'start': 18, 'date': '2016-5-28', 'venue': 'AiiA Theater Tokyo', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 3800, 'start': 18, 'date': '2016-5-28', 'venue': 'NHKホール', 'longitude': 139.6968789, 'latitude': 35.6665599}, {'num_of_people': 2010, 'start': 18, 'date': '2016-5-28', 'venue': 'サントリーホール', 'longitude': 139.7413971, 'latitude': 35.66663339999999}, {'num_of_people': 1300, 'start': 18, 'date': '2016-5-28', 'venue': 'TSUTAYA O-EAST', 'longitude': 139.6955876, 'latitude': 35.658733}, {'num_of_people': 500, 'start': 18, 'date': '2016-5-28', 'venue': '吉祥寺 CLUB SEATA', 'longitude': 139.5818774, 'latitude': 35.7055584}, {'num_of_people': 1300, 'start': 18, 'date': '2016-5-28', 'venue': '山野美容専門学校 山野ホール', 'longitude': 139.6997279, 'latitude': 35.6841578}, {'num_of_people': 3119, 'start': 18, 'date': '2016-5-28', 'venue': '日比谷野外大音楽堂', 'longitude': 139.7543263, 'latitude': 35.6728275}, {'num_of_people': 458, 'start': 18, 'date': '2016-5-28', 'venue': 'PARCO劇場(パルコ劇場)', 'longitude': 139.69904, 'latitude': 35.6605134}, {'num_of_people': 342, 'start': 18, 'date': '2016-5-28', 'venue': '新宿明治安田生命ホール', 'longitude': 139.6979181, 'latitude': 35.6905359}, {'num_of_people': 250, 'start': 18, 'date': '2016-5-28', 'venue': '日本橋三井ホール', 'longitude': 139.775383, 'latitude': 35.6854294}, {'num_of_people': 1324, 'start': 18, 'date': '2016-5-28', 'venue': '赤坂ACTシアター', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 3000, 'start': 18, 'date': '2016-5-28', 'venue': 'TOKYO DOME CITY HALL', 'longitude': 139.753828, 'latitude': 35.7049895}, {'num_of_people': 49970, 'start': 18, 'date': '2016-5-28', 'venue': '味の素スタジアム', 'longitude': 139.5254355, 'latitude': 35.6634009}, {'num_of_people': 410, 'start': 18, 'date': '2016-5-28', 'venue': '科学技術館 サイエンスホール', 'longitude': 139.753023, 'latitude': 35.6911892}, {'num_of_people': 2709, 'start': 19, 'date': '2016-5-28', 'venue': 'Zepp Tokyo(東京)', 'longitude': 139.7818926, 'latitude': 35.624722}, {'num_of_people': 1802, 'start': 19, 'date': '2016-5-28', 'venue': '文京シビックホール', 'longitude': 139.7524309, 'latitude': 35.707951}, {'num_of_people': 10000, 'start': 22, 'date': '2016-5-28', 'venue': 'WOMB', 'longitude': 139.6950487, 'latitude': 35.6583941}, {'num_of_people': 1428, 'start': 11, 'date': '2016-5-29', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 11098, 'start': 11, 'date': '2016-5-29', 'venue': '両国国技館', 'longitude': 139.7936036, 'latitude': 35.6972034}, {'num_of_people': 1897, 'start': 12, 'date': '2016-5-29', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 816, 'start': 12, 'date': '2016-5-29', 'venue': 'サンシャイン劇場', 'longitude': 139.7232404, 'latitude': 35.7262319}, {'num_of_people': 1216, 'start': 13, 'date': '2016-5-29', 'venue': '電通四季劇場[海]', 'longitude': 139.7623483, 'latitude': 35.6650287}, {'num_of_people': 1255, 'start': 13, 'date': '2016-5-29', 'venue': '四季劇場[春]', 'longitude': 139.7620402, 'latitude': 35.6566796}, {'num_of_people': 1200, 'start': 13, 'date': '2016-5-29', 'venue': '積水ハウスミュージカルシアター 四季劇場[夏]', 'longitude': 139.7333554, 'latitude': 35.6082652}, {'num_of_people': 824, 'start': 13, 'date': '2016-5-29', 'venue': 'AiiA Theater Tokyo', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 173, 'start': 13, 'date': '2016-5-29', 'venue': '赤坂RED/THEATER', 'longitude': 139.7370814, 'latitude': 35.6755898}, {'num_of_people': 600, 'start': 13, 'date': '2016-5-29', 'venue': '世田谷パブリックシアター', 'longitude': 139.669046, 'latitude': 35.6436557}, {'num_of_people': 501, 'start': 13, 'date': '2016-5-29', 'venue': 'よみうり大手町ホール', 'longitude': 139.7644669, 'latitude': 35.6871844}, {'num_of_people': 248, 'start': 13, 'date': '2016-5-29', 'venue': 'シアタートラム', 'longitude': 139.669046, 'latitude': 35.6436557}, {'num_of_people': 609, 'start': 13, 'date': '2016-5-29', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 300, 'start': 13, 'date': '2016-5-29', 'venue': '国立演芸場', 'longitude': 139.7432769, 'latitude': 35.6815595}, {'num_of_people': 342, 'start': 13, 'date': '2016-5-29', 'venue': '新宿明治安田生命ホール', 'longitude': 139.6979181, 'latitude': 35.6905359}, {'num_of_people': 3000, 'start': 13, 'date': '2016-5-29', 'venue': 'TOKYO DOME CITY HALL', 'longitude': 139.753828, 'latitude': 35.7049895}, {'num_of_people': 2956, 'start': 14, 'date': '2016-5-29', 'venue': '東京文化会館', 'longitude': 139.7752986, 'latitude': 35.714415}, {'num_of_people': 55000, 'start': 14, 'date': '2016-5-29', 'venue': '東京ドーム', 'longitude': 139.7531449, 'latitude': 35.7028239}, {'num_of_people': 1999, 'start': 14, 'date': '2016-5-29', 'venue': '東京芸術劇場', 'longitude': 139.7080751, 'latitude': 35.729842}, {'num_of_people': 238, 'start': 14, 'date': '2016-5-29', 'venue': '座・高円寺1', 'longitude': 139.6540083, 'latitude': 35.7059012}, {'num_of_people': 1324, 'start': 14, 'date': '2016-5-29', 'venue': '赤坂ACTシアター', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 1000, 'start': 14, 'date': '2016-5-29', 'venue': 'LIQUIDROOM (リキッドルーム)', 'longitude': 139.7105837, 'latitude': 35.6490402}, {'num_of_people': 1300, 'start': 14, 'date': '2016-5-29', 'venue': 'ラフォーレミュージアム六本木', 'longitude': 139.7411329, 'latitude': 35.6633171}, {'num_of_people': 1428, 'start': 15, 'date': '2016-5-29', 'venue': '新橋演舞場', 'longitude': 139.7669618, 'latitude': 35.6668813}, {'num_of_people': 200, 'start': 15, 'date': '2016-5-29', 'venue': '池袋mismatch', 'longitude': 139.7141548, 'latitude': 35.7334357}, {'num_of_people': 1147, 'start': 16, 'date': '2016-5-29', 'venue': '赤坂BLITZ', 'longitude': 139.7360778, 'latitude': 35.6757238}, {'num_of_people': 1746, 'start': 16, 'date': '2016-5-29', 'venue': 'EXシアター六本木(EX THEATER ROPPONGI)', 'longitude': 139.7271569, 'latitude': 35.6611948}, {'num_of_people': 3800, 'start': 17, 'date': '2016-5-29', 'venue': 'NHKホール', 'longitude': 139.6968789, 'latitude': 35.6665599}, {'num_of_people': 2402, 'start': 17, 'date': '2016-5-29', 'venue': '新木場STUDIO COAST', 'longitude': 139.8253126, 'latitude': 35.6422295}, {'num_of_people': 49970, 'start': 17, 'date': '2016-5-29', 'venue': '味の素スタジアム', 'longitude': 139.5254355, 'latitude': 35.6634009}, {'num_of_people': 609, 'start': 17, 'date': '2016-5-29', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 300, 'start': 17, 'date': '2016-5-29', 'venue': 'clubasia', 'longitude': 139.6953459, 'latitude': 35.6590191}, {'num_of_people': 1300, 'start': 17, 'date': '2016-5-29', 'venue': '北とぴあ', 'longitude': 139.7365219, 'latitude': 35.7550207}, {'num_of_people': 1300, 'start': 17, 'date': '2016-5-29', 'venue': 'TSUTAYA O-EAST', 'longitude': 139.6955876, 'latitude': 35.658733}, {'num_of_people': 342, 'start': 17, 'date': '2016-5-29', 'venue': '新宿明治安田生命ホール', 'longitude': 139.6979181, 'latitude': 35.6905359}, {'num_of_people': 2709, 'start': 18, 'date': '2016-5-29', 'venue': 'Zepp Tokyo(東京)', 'longitude': 139.7818926, 'latitude': 35.624722}, {'num_of_people': 3000, 'start': 18, 'date': '2016-5-29', 'venue': 'TOKYO DOME CITY HALL', 'longitude': 139.753828, 'latitude': 35.7049895}, {'num_of_people': 300, 'start': 18, 'date': '2016-5-29', 'venue': 'aube shibuya', 'longitude': 139.6978981, 'latitude': 35.6624758}, {'num_of_people': 1300, 'start': 18, 'date': '2016-5-29', 'venue': 'ラフォーレミュージアム六本木', 'longitude': 139.7411329, 'latitude': 35.6633171}, {'num_of_people': 300, 'start': 18, 'date': '2016-5-29', 'venue': '新宿ロフトPLUS ONE', 'longitude': 139.7015281, 'latitude': 35.6976677}, {'num_of_people': 550, 'start': 19, 'date': '2016-5-29', 'venue': 'ヤクルトホール', 'longitude': 139.7567015, 'latitude': 35.6617206}, {'num_of_people': 120, 'start': 19, 'date': '2016-5-29', 'venue': 'しもきた空間リバティ', 'longitude': 139.6682685, 'latitude': 35.6611423}, {'num_of_people': 703, 'start': 13, 'date': '2016-5-30', 'venue': '東京グローブ座', 'longitude': 139.7003548, 'latitude': 35.7047637}, {'num_of_people': 1318, 'start': 14, 'date': '2016-5-30', 'venue': 'かつしかシンフォニーヒルズ', 'longitude': 139.8522125, 'latitude': 35.7424583}, {'num_of_people': 609, 'start': 14, 'date': '2016-5-30', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 1318, 'start': 18, 'date': '2016-5-30', 'venue': 'かつしかシンフォニーヒルズ', 'longitude': 139.8522125, 'latitude': 35.7424583}, {'num_of_people': 14000, 'start': 18, 'date': '2016-5-30', 'venue': '日本武道館', 'longitude': 139.7497593, 'latitude': 35.6934055}, {'num_of_people': 703, 'start': 18, 'date': '2016-5-30', 'venue': '東京グローブ座', 'longitude': 139.7003548, 'latitude': 35.7047637}, {'num_of_people': 2956, 'start': 19, 'date': '2016-5-30', 'venue': '東京文化会館', 'longitude': 139.7752986, 'latitude': 35.714415}, {'num_of_people': 386, 'start': 19, 'date': '2016-5-30', 'venue': '本多劇場', 'longitude': 139.6683205, 'latitude': 35.6615874}, {'num_of_people': 1746, 'start': 19, 'date': '2016-5-30', 'venue': 'EXシアター六本木(EX THEATER ROPPONGI)', 'longitude': 139.7271569, 'latitude': 35.6611948}, {'num_of_people': 609, 'start': 12, 'date': '2016-5-31', 'venue': 'シアタークリエ', 'longitude': 139.7596899, 'latitude': 35.672636}, {'num_of_people': 824, 'start': 14, 'date': '2016-5-31', 'venue': 'AiiA Theater Tokyo', 'longitude': 139.6998092, 'latitude': 35.6669377}, {'num_of_people': 173, 'start': 14, 'date': '2016-5-31', 'venue': '赤坂RED/THEATER', 'longitude': 139.7370814, 'latitude': 35.6755898}, {'num_of_people': 1897, 'start': 18, 'date': '2016-5-31', 'venue': '帝国劇場', 'longitude': 139.7608036, 'latitude': 35.6767439}, {'num_of_people': 14000, 'start': 18, 'date': '2016-5-31', 'venue': '日本武道館', 'longitude': 139.7497593, 'latitude': 35.6934055}]

  for(var i=0; i<event_list.length; i++){
    console.log(event_list[i])
    Event.update(
      {
        _id: new ObjectID()
      },
      {
        num_of_people: event_list[i]["num_of_people"],
        start: event_list[i]["start"],
        date: event_list[i]["date"],
        venue: event_list[i]["venue"],
        longitude: event_list[i]["longitude"],
        latitude: event_list[i]["latitude"]
      },
      {
        upsert: true
      }, function(err, doc){
        console.log(doc);
        console.log(err);
        console.log("更新しました?");
      }
    );
  };
});

router.get("/date", function(req, res){
  console.log("/dateにアクセスがありました. クエリは")
  console.log(req.query);
  var dateTime = req.query.date;
  Event.find({date: dateTime}, function(err, events) {
    console.log("hay")
    res.json(events);
    console.log(events);
  });
});

router.get("/date-sum", function(req, res){
  console.log("/month-sumにアクセスがありました. クエリは");
  console.log(req.query);
  var dateTime = req.query.date;
  Event.find({date: dateTime}, function(err, events) {
    var sum_people_per_day = 0;
    for(var i=0; i<events.length; i++){
      sum_people_per_day += events[i]["num_of_people"];
    }
    res.json(sum_people_per_day);
  })
});

module.exports = router;
